import"./dashboard-DI9Vp-t7.js";const f=async(o,s)=>{try{const t=await fetch(`http://localhost:3000${o}`,{...s,headers:{"Content-Type":"application/json",...s.headers},credentials:"include"}),e=await t.json();return{response:t,result:e}}catch(t){throw console.error(`API request failed for ${o}:`,t),t}},E=o=>{o.forEach(s=>{s&&(s.textContent="",s.style.display="none",s.style.color="")})};document.addEventListener("DOMContentLoaded",()=>{const o=document.getElementById("loginForm"),s=document.getElementById("createForm"),t=document.getElementById("errorMessage"),e=document.getElementById("createMessage");o&&o.addEventListener("submit",async i=>{var c,l;i.preventDefault(),E([t,e]);const r=(c=document.getElementById("username"))==null?void 0:c.value,a=(l=document.getElementById("password"))==null?void 0:l.value;if(!r||!a){t.textContent="Username and password are required",t.style.display="block";return}try{const{response:d,result:n}=await f("/api/login",{method:"POST",body:JSON.stringify({username:r,password:a})});d.ok?(console.log("Login successful:",n),window.location.href=n.redirect||"/dashboard.html"):(t.textContent=n.message||"Login failed",t.style.display="block")}catch{t.textContent="An error occurred. Please try again.",t.style.display="block"}}),s&&s.addEventListener("submit",async i=>{var n,m,y,u,g;i.preventDefault(),E([t,e]);const r=(n=document.getElementById("createUsername"))==null?void 0:n.value,a=(m=document.getElementById("createFirstName"))==null?void 0:m.value,c=(y=document.getElementById("createLastName"))==null?void 0:y.value,l=(u=document.getElementById("createEmail"))==null?void 0:u.value,d=(g=document.getElementById("createPassword"))==null?void 0:g.value;if(!r||!a||!c||!l||!d){e.textContent="All fields are required",e.style.color="red",e.style.display="block";return}try{const{response:p,result:h}=await f("/api/create",{method:"POST",body:JSON.stringify({username:r,firstName:a,lastName:c,email:l,password:d})});p.ok?(e.textContent="Account created successfully! Please log in.",e.style.display="block",s.reset()):(e.textContent=h.message||"Account creation failed",e.style.color="red",e.style.display="block")}catch{e.textContent="An error occurred. Please try again.",e.style.color="red",e.style.display="block"}})});
